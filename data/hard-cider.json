{
  "name": "Hard Cider",

  "questions": [
    {
      "label": "Does the juice has preservatives; sorbates, sorbitol, or sulfite?",
      "variableId": "isUnsuitable"
    },
    {
      "label": "Is the juice cloudy?",
      "variableId": "isCloudy"
    },
    {
      "label": "How much liquid?",
      "variableId": "volumeInL"
    },
    {
      "label": "Measure the original gravity of the juice. (ex. 1.020)",
      "variableId": "og"
    },
    {
      "label": "What is the efficiency of your yeast?",
      "variableId": "yeastEfficiency"
    },
    {
      "label": "How much alcohol do you want in percent? Suggest > 7.0 for long storage.",
      "variableId": "degreeAlcool"
    },
    {
      "label": "What is the ppg of your sugar.",
      "variableId": "sugarPpg"
    },
    {
      "label": "From 0 (no tannin) to 5 (full blown tannin)",
      "variableId": "tanninLvl"
    },
    {
      "label": "What is the PH of the juice?",
      "variableId": "juicePh"
    },
    {
      "label": "What is required PH of the juice?",
      "variableId": "finalPh"
    }
  ],

  "data": {
    "isUnsuitable": { "type": "boolean" },
    "isCloudy": { "type" : "boolean" },
    "volumeInL": { "type" : "volume" },
    "og": { "type" : "text" },
    "pecticEnzymeInG": {
      "type" : "computed",
      "compute": "volumeInL * (1/3.78541) * 4.0 * 0.5 * isCloudy",
      "Northern Brewers Cider Guide": "½ tsp per gal",
      "liters to gal" : 0.264172,
      "_weigthToTsp": "http://www.nashwoodwinery.com/Equivalency_Tables.pdf"
    },
    "potassMetaInG": {
      "type" : "computed",
      "compute": "volumeInL * (1/3.78541) * (1/5) * (1/4) * 6.2",
      "_recommendation": "Northern Brewers : ¼ tsp pot. meta. per 5 gal",
      "_weigthToTsp": "http://winemaking.jackkeller.net/measures.asp"
    },
    "yeastNutrientInG": {
      "type" : "computed",
      "compute": "volumeInL * (1/3.78541) * (1/4) * 3.3",
      "_weigthToTsp": "http://winemaking.jackkeller.net/measures.asp"
    },
    "yeastEfficiency": { "type" : "text" },
    "degreeAlcool": { "type" : "text" },
    "sugarPpg": { "type" : "text" },
    "sugarPKgL": {
      "type" : "computed",
      "compute": "(sugarPpg / 1000) * 3.78541 * 2.20462262",
      "_PPGtoMetric": "PPG * (gallon/L) * (kg/lb)"
    },
    "additionalGravity": {
      "type" : "computed",
      "compute": "1 - og + (degreeAlcool/(131.25*yeastEfficiency))"
    },
    "chaptizeSugarKg": {
      "type" : "computed",
      "compute": "(additionalGravity*volumeInL)/sugarPKgL"
    },
    "tanninLvl": { "type" : "text" },
    "tanninG": {
      "type": "computed",
      "compute": "volumeInL * (1/3.78541) * (1/4) * 2.8 * (tanninLvl/5)",
      "_recommendation": "1/4 tsp of tannins per gallon of wine"
    },
    "acidAddition": {
      "type" : "computed",
      "compute": "0"
    },
    "juicePh": { "type" : "text" },
    "finalPh": { "type" : "text" }
  },

  "steps": [
    {
      "hidden": "!{{isUnsuitable}}",
      "template": "This juice is unsuitable for cider making, you may continue at your own risk."
    },
    {
      "hidden": "!{{isCloudy}}",
      "template": "Add {{pecticEnzymeInG}} g of pectic enzyme."
    },
    {
      "template": "Add {{potassMetaInG}} g of potassium metabisulfite. Blend with juice first to dissolve."
    },
    {
      "template": "Allow 3 hours for potassium metabisulfite to act."
    },
    {
      "template": "Add yeast nutrient. Roughly {{yeastNutrientInG}} g, could need more as fermentation goes."
    },
    {
      "template": "Add your sugar. {{chaptizeSugarKg}} kg to achieve the alcohol you requested."
    },
    {
      "template": "Add {{acidAddition}} g of ascetic acid to achieve required PH."
    },
    {
      "template": "Add {{tanninG}} g of wine tannin."
    },
    {
      "template": "Add English ale yeast"
    },
    {
      "template": "Stir yeast in."
    },
    {
      "template": "Think to add ~.5% ABV for bottle priming"
    }
  ]
}
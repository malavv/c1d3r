<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="c1d3r-juice">
  <template>
    <style></style>
  </template>

  <script>
    Polymer({

      is: 'c1d3r-juice',

      hostAttributes: {
        hidden: true
      },

      properties: {

        data: {
          type: Object,
          notify: true,
          value: function() { return {}; }
        },
        isLogging: {
          type: Boolean,
          value: true
        },
        recipe: Object
      },

      observers: [
          '_newRecipe(recipe)',
          '_attributeChanged(data.*)'
      ],

      _newRecipe(recipe) {
        recipe.data
            .filter(d => d.group === 'preset')
            .forEach(d => this.set('data.' + d.id, d.value));
      },

      _attributeChanged(values) {
        if (this.isLogging)
          console.info('[juice]<' + values.path + '> => ' + JSON.stringify(values.value));
      }
    });
  </script>
</dom-module>

<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="c1d3r-progress.html">

<dom-module id="c1d3r-tutorial">
  <template>
    <style include="iron-flex iron-flex-factors"></style>
    <style>
      :host {
        @apply(--layout-vertical);
        background-color: #eee;
      }
      div.content {
        @apply(--layout-vertical);
        padding-top: 3em;
        max-width: 600px;
      }

      div.title {
        font-size: 2em;
        font-weight: 400;

        padding: 1.5em 0;
      }

      div.desc c1d3r-progress {
        padding: 1.5em 0;
      }

      div.desc div.skip {
        font-size: 0.8em;
        padding-top: 2em;
      }

      div.nav {
        @apply(--layout-horizontal);
        padding-bottom: 1em;
      }
    </style>

    <div class="layout horizontal">
      <div class="flex"></div>

      <div class="content">
        <div class="title">How does it works?</div>

        <div class="desc">
          <p>
            In this guide, we will guide you to creating the hard cider you want from the apple juice you have. As we recognize that apple juice makes a big difference in the final product, and that far more than usual what you get from recipe book is a static recipe that does not take the juice into account, we created for you a product that will help you achieve reliable results with us doing all the legwork. This is the reason why our recipe maker is focused around stages explained by a visual progress indicator.
          </p>

          <c1d3r-progress id="progress-example" step="0"></c1d3r-progress>

          <p>
            This progress bar serves as an indicator of where you are in the progress. It also indicates how close you are to completion and where you are heading when going back.
          </p>

          <ul>
            <li>Stage 1 being an introductory page that will describe the style and type of the recipe.</li>
            <li>Stage 2 allows the user to describe the apple juice and adjustable ingredients that will serve as the base of the hard cider.</li>
            <li>Stage 3 dictates the steps that were generated to best fit the initial ingredients that were proposed.</li>
            <li>Stage 4 proposes way to save and archive the initial conditions and steps for future references.</li>
          </ul>

          <div class="skip">
            <paper-checkbox checked="{{skip}}"></paper-checkbox>
            Do not show the tutorial again.
          </div>
        </div>
      </div>

      <div class="flex"></div>
    </div>

    <div class="flex"></div>

    <div class="nav">
      <div class="flex"></div>
      <paper-button on-tap="navBack">Go Back</paper-button>
      <paper-button on-tap="navNext">Next</paper-button>
    </div>

  </template>

  <script>
    Polymer({
      is: 'c1d3r-tutorial',

      hostAttributes: {},

      properties: {
        skip: {
          type: Boolean,
          observer: '_skipChanged'
        },
        cancelHandle: Number,
        blinkPeriod: {
          type: Number,
          value: 2500
        }
      },

      navBack() { this.fire('home'); },

      navNext() { this.fire('next'); },

      _blink() {
        let progressBar = this.$$('c1d3r-progress');
        progressBar.set('step', (progressBar.step + 1) % 4);
        this.cancelHandle = this.async(() => this._blink(), this.blinkPeriod);
      },

      _skipChanged(wantsSkip) {
        if (!wantsSkip)
          return;
        this.fire('store-skip');
      },

      onBlur() {
        this.cancelAsync(this.cancelHandle);
      },

      onFocus() {
        this.$$('c1d3r-progress').step = 0;
        this.cancelHandle = this.async(() => this._blink(), this.blinkPeriod);
      }
    });
  </script>
</dom-module>

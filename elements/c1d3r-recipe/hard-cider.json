{
  "name": "Hard Cider",

  "questions": [
    {
      "label": "Does the juice has preservatives; sorbates, sorbitol, or sulfite?",
      "variableId": "isUnsuitable"
    },
    {
      "label": "Is the juice cloudy?",
      "variableId": "isCloudy"
    },
    {
      "label": "How much liquid?",
      "variableId": "volumeInL"
    },
    {
      "label": "Measure the original gravity of the juice. (ex. 1.020)",
      "variableId": "og"
    },
    {
      "label": "What is the efficiency of your yeast?",
      "variableId": "yeastEfficiency"
    },
    {
      "label": "How much alcohol do you want in percent? Suggest > 7.0 for long storage.",
      "variableId": "degreeAlcool"
    },
    {
      "label": "What is the ppg of your sugar.",
      "variableId": "sugarPpg"
    },
    {
      "label": "From 0 (no tannin) to 5 (full blown tannin)",
      "variableId": "tanninLvl"
    },
    {
      "label": "What is the PH of the juice?",
      "variableId": "juicePh"
    },
    {
      "label": "What is required PH of the juice?",
      "variableId": "finalPh"
    }
  ],

  "data": {
    "isUnsuitable": { "type": "boolean" },
    "isCloudy": { "type" : "boolean" },
    "volumeInL": { "type" : "volume" },
    "og": { "type" : "text" },
    "pecticEnzymeInTsp": {
      "type" : "computed",
      "compute": "volumeInL * 0.264172 * 0.5"
    },
    "potassMetaInTsp": {
      "type" : "computed",
      "compute": "volumeInL * (1/75.7082)"
    },
    "yeastNutrientInTsp": {
      "type" : "computed",
      "compute": "volumeInL * (1/75.7082)"
    },
    "yeastEfficiency": { "type" : "text" },
    "degreeAlcool": { "type" : "text" },
    "sugarPpg": { "type" : "text" },
    "chaptizeTableSugarInG": {
      "type" : "computed",
      "compute": "(1000/sugarPpg)*((degreeAlcool-(yeastEfficiency*og*131.25)+(yeastEfficiency*131.25))/(yeastEfficiency*131.25))"
    },
    "tanninLvl": { "type" : "text" },
    "acidAddition": {
      "type" : "computed",
      "compute": "0"
    },
    "juicePh": { "type" : "text" },
    "finalPh": { "type" : "text" }
  },

  "steps": [
    {
      "type": "if",
      "bind": "isCloudy",
      "template": "This juice is unsuitable for cider making, you may continue at your own risk."
    },
    {
      "type": "template",
      "template": "Add {} tsp of pectic enzyme.",
      "bind": "pecticEnzymeInTsp"
    },
    {
      "type": "template",
      "template": "Add {} tsp of potassium metabisulfite. Blend with juice first to dissolve.",
      "bind": "potassMetaInTsp"
    },
    {
      "type": "show",
      "template": "Allow 3 hours for potassium metabisulfite to act."
    },
    {
      "type": "template",
      "template": "Add yeast nutrient. Roughly {} tsp, could need more as fermentation goes.",
      "bind": "yeastNutrientInTsp"
    },
    {
      "type": "template",
      "template": "Add your sugar. {} lb to achieve the alcohol you requested.",
      "bind": "chaptizeTableSugarInG"
    },
    {
      "type": "template",
      "template": "Add {} g of ascetic acid to achieve required PH.",
      "bind": "acidAddition"
    },
    {
      "type": "template",
      "template": "Add {} tsp of wine tannin.",
      "bind": "tanninLvl"
    },
    {
      "type": "show",
      "template": "Add English ale yeast"
    },
    {
      "type": "show",
      "template": "Think to add ~.5% ABV for bottle priming"
    }
  ]
}
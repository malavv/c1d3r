<dom-module id="c1d3r-overview">
  <style>
    :host {}
    :host .sections {
      @apply(--layout-horizontal);
    }
    :host .sections .section {
      @apply(--layout-flex);
      padding: 0 5px;
    }
    :host .sections div .header {
      text-align: center;
      background-color: #fafafa;
      border-bottom: 1px solid gray;
    }
    :host .dataline {
      @apply(--layout-horizontal);
    };
    :host .dataline > div {
      @apply(--layout-flex);
    };
    :host .recipe-lines {
      @apply(--layout-horizontal);
      padding: 0 10px;
    };
    :host .recipe-lines .recipe-info {
      @apply(--layout-flex);
    };
  </style>

  <template>
    <h1>C1d3r</h1>
    <div class="sections">
      <div class="section">
        <div class="header">Recipe</div>
        <div class="content">
          <div class="recipe-lines">
            <div class="recipe-info">Number of data param</div>
            <div>{{_count(data, data.*)}}</div>
          </div>
          <div class="recipe-lines">
            <div class="recipe-info">Number of questions</div>
            <div>{{questions.length}}</div>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="header">Current Data</div>
        <div class="content">
          <template is="dom-repeat" items="{{_toArray(data, data.*)}}" id="dataList" as="e">
            <div class="dataline">
              <div class="name">{{e.value.name}}</div>
              <div class="type">{{e.value.type}}</div>
              <div class="value">{{e.value.value}}</div>
            </div>
          </template>
        </div>
      </div>
    </div>
  </template>

    <script>
    (function() {
        'use strict';

        Polymer({
            is: 'c1d3r-overview',

            properties: {
              data: {
                type: Object
              },
              questions: Array
            },

            mapValues: function(items) {
              return items.value.forEach(function() {

              }); 
              if (items.value instanceof Map)
                return Array.from(items.value.values());
              return [];
            },
            listObjectValue: function(obj) {
              return Object.keys(obj).map(function(k) { return obj[k]; });
            },
            onEntersView: function() {
                console.debug('c1d3r-overview', 'onEntersView');
            },
            onExitsView: function() {
                console.debug('c1d3r-overview', 'onExitsView');
            },
            _toArray: function(obj) {
              return Object.keys(obj).map(function(key) {
                return {key: key, value: obj[key]};
              });
            },
            _count: function(obj) {
              return Object.keys(obj).length;
            }
        });
    })()
    </script>
</dom-module>